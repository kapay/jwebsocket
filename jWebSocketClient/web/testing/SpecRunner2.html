<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Jasmine Test Runner</title>
		<link rel="stylesheet" type="text/css" href="lib/jasmine-1.0.2/jasmine.css">
		<script type="text/javascript" src="lib/jasmine-1.0.2/jasmine.js"></script>
		<script type="text/javascript" src="lib/jasmine-1.0.2/jasmine-html.js"></script>
		<script type="text/javascript" src="../res/js/jWebSocket.js"></script>
		<script type="text/javascript" src="../res/js/jwsAPIPlugIn.js"></script>

		<!-- include source files here... 
		<script type="text/javascript" src="src/TestPlugInHelper.js"></script>
		-->

		<!-- include spec files here... -->
		<script type="text/javascript" src="spec/Matchers.js"></script>
		<script type="text/javascript" src="spec/SpecBase.js"></script>

	</head>
	<body>

		<script type="text/javascript">
			
			if(jws.browserSupportsWebSockets()){
				
				auxConn = new jws.jWebSocketJSONClient();
				conn = new jws.jWebSocketJSONClient();

				conn.addPlugIn( new jws.APIPlugIn() );

				auxConn.open(jws.getDefaultServerURL(), {

					OnOpen: function() {

						conn.open( jws.getDefaultServerURL(), {

							OnWelcome: function (){
	
								conn.api.serverAPI( function ( aResponse ) {
									// iterate through all the plug-ins
									var lLen = aResponse.api.length;
									for (var lIdx = 0; lIdx < lLen; lIdx++){
										conn.api.describePlugIn( aResponse.api[ lIdx ]);
									}
									setTimeout(function (){
										jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
										jasmine.getEnv().execute();
									}, 500);
							
								});
								
							}
						});
					},

					OnClose: function() {
						console.log( "connection closed!");
					}

				});

			} else {
				var lMsg = jws.MSG_WS_NOT_SUPPORTED;
				alert( lMsg );
				log( lMsg );
			}
		</script>

	</body>
</html>
